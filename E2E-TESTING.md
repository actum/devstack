# Appium
[Homepage - https://github.com/appium/appium](https://github.com/appium/appium)



### Installing dependencies
```
npm install -g appium  # get appium
npm install -g mocha   # get test runner
```
> Make sure you have not installed Node or Appium with sudo, otherwise you'll run into problems

Prepare iOS and Android environments following the [RN Getting Started](https://facebook.github.io/react-native/docs/getting-started.html) for both platforms if you have not done it yet. For Android don't forget to set up your Android Virtual Device.


With Xcode 8 you will need to install Carthage dependency manager also:
```
brew install carthage
```



### Authorizing iOS on the computer

You need to authorize use of the iOS Simulator by running the `authorize-ios`
binary made available through `npm`. Install the program by running

```
npm install -g authorize-ios
```

And the invoke the program using

```
sudo authorize-ios
```

If you are running [Appium.app](https://github.com/appium/appium-dot-app), you can
authorize iOS through the GUI.

You need to do this every time you install a new version of Xcode.

### Usage

```
npm run test:compile  # build for simulator
npm run test:server   # start appium server (run it in other terminal window)
npm run test:e2e      # run the test example
```

Write your test inside `test/e2e/**` folder and name it with `.spec.js` extension. Example is in `test/e2e/menu.spec.js`.

Example of basic WD methods with description:
```
driver.
  elementById('menuBtn').click() // click on element with accessibilityLabel="menuBtn"
  .sleep(1000) // doing nothing for 1 second
  .isDisplayed((err, isVisible) => // test case fails when element is not visible
    isVisible.should.be.ok,
  )
  .elementByName('Todos') // get text element with label Todos
    .should.eventually.exist // check if element exists,
  .waitForElementByName('Todos', 10000) // waiting for element with label Todos at most 10 seconds

```

### Finding elements

For inspecting components labels and ids you could use `Accessibility Inspector` available from Xcode's Developer tools.

- Text elements could be found by name
```
 <Text>{'My name'}</Text> // driver.elementByName('My name')
```
- for other components `accessibilityLabel` could be defined (use [BEM](http://getbem.com/introduction/) for the labels)
```
<Menu>
    <MyComponent accessibilityLabel="menu__my-component" />
    { /* elementById('menu__my-component') */ }

    <MyComponent accessibilityLabel="menu__my-component--blue" blue />
    { /* elementById('menu__my-component--blue') */ }
 </Menu>
```
If `MyComponent` doesn't get `accessibilityLabel` props, you may need to wrap it in `View` component.
```
<Menu>
    <View accessibilityLabel="menu__my-component" >
      <MyComponent />
    </View>
 </Menu>
```
- other option is `xpath` and it could locate UI elements without any changes in code using [XCUIElementType](https://developer.apple.com/reference/xctest/xcuielementtype?language=objc)
```
elementByXPath('//XCUIElementTypeStaticText') // find some Text element
```

[Appium docs about finding elements](https://github.com/appium/appium/blob/master/docs/en/writing-running-appium/finding-elements.md)

### Resources
[Appium setup for all platforms](https://github.com/appium/appium/tree/master/docs/en/appium-setup)


[Webdriver API](https://github.com/admc/wd/blob/master/doc/api.md) describes all methods available

[Docs about finding elements](https://github.com/appium/appium/blob/master/docs/en/writing-running-appium/finding-elements.md)

[Appium server capabilities](http://appium.io/slate/en/master/#caps.md) like `platformName`, `platformVersion`, `locale`, `fullReset`, used in `test/e2e/helpers/caps.js`

[Chai - should interface](http://chaijs.com/api/bdd/) describes all assertion posibilities

[chai-as-promised extension](http://chaijs.com/plugins/chai-as-promised/) extends Chai with `eventually` for promises


### Examples
https://github.com/appium/sample-code/tree/master/sample-code/examples/node

### Files generated by iOS test runs

Testing on iOS generates files that can sometimes get large. These include logs,
temporary files, and derived data from Xcode runs. Generally the following locations
are where they are found, should they need to be deleted:

```
$HOME/Library/Logs/CoreSimulator/*
```

For XCUITest-based tests:

```
$HOME/Library/Developer/Xcode/DerivedData/*
```

### Xcode 7.3 (useful for trying older examples)
Older Xcode could be downloaded from here https://developer.apple.com/download/more/

selecting Xcode version for building from command line using `xcode-select`:
```
sudo xcode-select -s /Applications/Xcode7/Xcode.app/Contents/Developer
sudo xcode-select -s /Applications/Xcode.app/Contents/Developer
```

to inspect which version is currently selected:
```
xcode-select -p
```

# Detox

## looks promising, but not ready for production yet

[Homepage - https://github.com/wix/detox](https://github.com/wix/detox)

- iOS only
- only Xcode 7.3 so iOS 9 at this time https://github.com/wix/detox/issues/44
- react-native 0.33.1 or **lower!** https://github.com/wix/detox/issues/43
